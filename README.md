–í—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏–º–ø–æ—Ä—Ç–∞ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤ –æ—Ç —Å–æ—Ç–µ–Ω —Ç—ã—Å—è—á –ø—Ä–æ–¥–∞–≤—Ü–æ–≤. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –º–∏–ª–ª–∏–æ–Ω—ã —Å—Ç—Ä–æ–∫ –≤ CSV-—Ñ–∞–π–¥–∞—Ö, –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—é, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é, –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ PostgreSQL + OpenSearch. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ ‚Äî –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è, —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –æ—á–µ—Ä–µ–¥–µ–π RabbitMQ –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏.

üß© –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
 n–ö–æ–º–ø–æ–Ω–µ–Ω—Ç
–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è
Backend
PHP 8.2+, Yii2 (Advanced)
Frontend
Vue 3 + Vite
–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
PostgreSQL 16
–ü–æ–∏—Å–∫
OpenSearch
–û—á–µ—Ä–µ–¥–∏
RabbitMQ
–ö—ç—à / –°–µ—Å—Å–∏–∏
Redis
–•—Ä–∞–Ω–µ–Ω–∏–µ –º–µ–¥–∏–∞
MinIO (S3-compatible)
–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
Imaginary (–Ω–∞ –±–∞–∑–µ libvips)
–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
Docker + docker-compose
üì¶ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞ (–ª–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
Docker 24+
Docker Compose v2+
RAM ‚â• 16 –ì–ë (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 32 –ì–ë)
Windows (WSL2 —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
–®–∞–≥–∏
–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
bash
12
git clone <repo-url>
cd <project-dir>
–°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è) –∏–ª–∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∑–∞–¥–∞–Ω—ã –≤ docker-compose.yml.
–°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
bash
1
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ PHP
bash
1
docker exec -it yii2_php composer install
–ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏
bash
1
docker exec -it yii2_php php yii migrate/up --interactive=0
–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –æ—á–µ—Ä–µ–¥–∏ RabbitMQ
bash
1
# –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–∏—Å queue-init –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
Frontend (Vue)
–î–æ—Å—Ç—É–ø–µ–Ω –ø–æ https://localhost:5173
–¢—Ä–µ–±—É–µ—Ç SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –≤ ./frontend/ssl/ (—Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ OK)
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx (./nginx/default.conf) —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ –ø—Ä–æ–∫—Å–∏ –∫ Vite
Backend API
–î–æ—Å—Ç—É–ø–µ–Ω –ø–æ http://localhost:8080
HTTPS: https://localhost:8443 (—Ç—Ä–µ–±—É–µ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤)
üóÉÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–æ–≤
123456789
‚îú‚îÄ‚îÄ backend/              # Yii2-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (API, –∫–æ–Ω—Å–æ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã)
‚îú‚îÄ‚îÄ frontend/             # Vue-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ nginx/                # –ö–æ–Ω—Ñ–∏–≥–∏ Nginx
‚îú‚îÄ‚îÄ data/                 # –î–∞–Ω–Ω—ã–µ MinIO (–ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ)
‚îú‚îÄ‚îÄ config/               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è MinIO (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π –ø—É—Ç—å, –º–æ–∂–µ—Ç –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è)
‚îú‚îÄ‚îÄ docker-compose.yml    # –û—Å–Ω–æ–≤–Ω–æ–π compose-—Ñ–∞–π–ª
‚îú‚îÄ‚îÄ php.ini               # –ö–∞—Å—Ç–æ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ PHP (memory_limit=128M –∏ —Ç.–¥.)
‚îú‚îÄ‚îÄ worker.conf           # –ö–æ–Ω—Ñ–∏–≥ Supervisor –¥–ª—è –≤–æ—Ä–∫–µ—Ä–æ–≤
‚îî‚îÄ‚îÄ
‚öôÔ∏è –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
üì• –ò–º–ø–æ—Ä—Ç —Ñ–∏–¥–æ–≤
–û–±—Ä–∞–±–æ—Ç–∫–∞ CSV-—Ñ–∞–π–ª–æ–≤ –ø–∞—á–∫–∞–º–∏ (chunk-based).
–í–∞–ª–∏–¥–∞—Ü–∏—è, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è (brand, product_name, warranty, color –∏ –¥—Ä.).
–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–∞—Ä–∏–∞—Ç–∏–≤–Ω—ã—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤: —Ü–≤–µ—Ç, –ø–∞–º—è—Ç—å, –≥–∞—Ä–∞–Ω—Ç–∏—è.
–ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å —Ç–æ–≤–∞—Ä–æ–≤ —á–µ—Ä–µ–∑:
match_key (–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –∏–º—è + –±—Ä–µ–Ω–¥ + –∫–∞—Ç–µ–≥–æ—Ä–∏—è)
gtin / model_number
variant_hash (–Ω–∞ –æ—Å–Ω–æ–≤–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤)
–û—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ Redis: feed:errors:{reportId} ‚Üí CSV-–æ—Ç—á—ë—Ç –¥–ª—è –ø—Ä–æ–¥–∞–≤—Ü–∞.
üîÑ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
RabbitMQ: –æ—Ç–¥–µ–ª—å–Ω—ã–µ –æ—á–µ—Ä–µ–¥–∏ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞, –æ–±—Ä–∞–±–æ—Ç–∫–∏, –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏.
10+ –≤–æ—Ä–∫–µ—Ä–æ–≤ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ worker.conf).
Supervisor —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ yii2_worker.
üîç –ü–æ–∏—Å–∫ –∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è
–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –≤ OpenSearch –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.
–ü–æ–¥–¥–µ—Ä–∂–∫–∞ full-text search, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –∞—Ç—Ä–∏–±—É—Ç–∞–º.
Signed URLs –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (MinIO + Imaginary).
üñºÔ∏è –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
–•—Ä–∞–Ω–µ–Ω–∏–µ –≤ MinIO.
–û–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ Imaginary (resize, fit, crop).
URL –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ ImageManager —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π signed-—Å—Å—ã–ª–æ–∫.
üõ†Ô∏è –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
–î–µ–π—Å—Ç–≤–∏–µ
–ö–æ–º–∞–Ω–¥–∞
–ó–∞–ø—É—Å–∫ –∏–º–ø–æ—Ä—Ç–∞ —Ñ–∏–¥–∞ (—Ä—É—á–Ω–æ–π)
docker exec -it yii2_php php yii feed/import vendor_id file.csv
–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤–æ—Ä–∫–µ—Ä–∞
docker logs yii2_worker -f
–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
psql -h localhost -p 5432 -U myuser -d mydb
–î–æ—Å—Ç—É–ø –∫ MinIO Console
http://localhost:9001 (–ª–æ–≥–∏–Ω: minioadmin / minioadmin)
RabbitMQ Management UI
http://localhost:15672
OpenSearch Dashboards
http://localhost:5601
üìå –ü—Ä–∏–º–µ—á–∞–Ω–∏—è
–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å: Europe/Moscow (–Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ PostgreSQL –∏ PHP).
–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –≤ production; –æ—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–∞ –ø–∏—à—É—Ç—Å—è –≤ offer-import-error.
–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
PostgreSQL –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø–æ–¥ high-load (shared_buffers=8GB –∏ —Ç.–¥.).
PHP memory_limit = 128M.
–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (Vite —Ç—Ä–µ–±—É–µ—Ç HTTPS –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –±—ç–∫–µ–Ω–¥–æ–º –Ω–∞ –¥—Ä—É–≥–æ–º –ø–æ—Ä—Ç—É).
MinIO –∏ OpenSearch –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ (127.0.0.1).